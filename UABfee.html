<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAB Pay/Visa Card Topup Fee</title>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css' rel='stylesheet'/>
    <link href='/assets/css/styles.css' rel='stylesheet'>
</head>
<body class='dark-theme'>
    <div class='header'>
        <div class='logo-section'>
            <img alt='Logo' class='logo' src='/assets/images/your-logo.png'/>
            <h1 class='site-title'>UAB Pay/Visa Card Topup Fee</h1>
        </div>
        <button class='theme-toggle' onclick='toggleTheme()'>
            <i class='fas fa-sun'/>
        </button>
    </div>

    <div class='fee-tables-container'>
        <div id='uabFeeTable'></div>
    </div>

    <div id='return-to-top' onclick='scrollToTop()'>
        <i class='fas fa-arrow-up'/>
    </div>

    <script src='/assets/js/script.js'></script>
    <script>
    // Specific UAB fee table loader
    async function loadUABFeeTable() {
        const container = document.getElementById('uabFeeTable');
        container.innerHTML = '<div class="loading">Loading UAB fees...</div>';
        
        try {
            const rows = await fetchFeeData('uab');
            if (!rows || rows.length === 0) throw new Error('No data');
            
            let html = `<table class="fee-table">
                <thead><tr>${rows[0].map(h => `<th>${h}</th>`).join('')}</tr></thead>
                <tbody>`;
            
            for (let i = 1; i < rows.length; i++) {
                html += `<tr>${rows[i].map((cell, j) => 
                    `<td>${j > 0 && !isNaN(cell) ? cell + ' Ks' : cell}</td>`
                ).join('')}</tr>`;
            }
            
            container.innerHTML = html + '</tbody></table>';
        } catch (error) {
            container.innerHTML = '<div class="error">Failed to load UAB fees. Please try again later.</div>';
        }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Apply saved theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            document.body.classList.replace('dark-theme', 'light-theme');
            document.querySelector('.theme-toggle i').className = 'fas fa-moon';
        }
        
        // Load the UAB table
        loadUABFeeTable();
        
        // Set up scroll to top button
        window.onscroll = function() {
            const btn = document.getElementById('return-to-top');
            btn.style.display = (window.scrollY > 100) ? 'flex' : 'none';
        };
    });

    // Reuse main page's theme toggle function
    function toggleTheme() {
        const body = document.body;
        const icon = document.querySelector('.theme-toggle i');
        
        if (body.classList.contains('dark-theme')) {
            body.classList.replace('dark-theme', 'light-theme');
            icon.className = 'fas fa-moon';
            localStorage.setItem('theme', 'light');
        } else {
            body.classList.replace('light-theme', 'dark-theme');
            icon.className = 'fas fa-sun';
            localStorage.setItem('theme', 'dark');
        }
    }

    // Reuse main page's scroll function
    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    </script>
</body>
</html>
